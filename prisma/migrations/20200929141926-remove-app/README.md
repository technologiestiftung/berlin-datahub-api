# Migration `20200929141926-remove-app`

This migration has been generated by fabianmoronzirfas at 9/29/2020, 4:19:26 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Device" DROP CONSTRAINT "Device_applicationId_fkey"

ALTER TABLE "public"."Device" DROP COLUMN "applicationId",
DROP COLUMN "name",
ADD COLUMN "ttnDeviceId" text   NOT NULL ,
ADD COLUMN "ttnAppId" text   NOT NULL 

DROP TABLE "public"."Application"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200929100526-recorded-at..20200929141926-remove-app
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -17,40 +17,27 @@
   username  String   @unique
   password  String
 }
-model Application {
-  id             Int      @default(autoincrement()) @id
-  name           String
-  description    String?
-  applicationKey String
-  devices        Device[]
+model Device {
+  id Int @default(autoincrement()) @id
-  // ApplicationType   ApplicationType? @relation(fields: [applicationTypeId], references: [id])
-  // applicationTypeId Int?
+  ttnDeviceId String
+  ttnAppId    String
+  description String?
+  records     Record[]
+  // possible more MetdData
+  // location
+  // SSID
+  // foo
+  // Cake
 }
-// ApplicationType
-// model ApplicationType {
-//   id           Int           @default(autoincrement()) @id
-//   name         String
-//   description  String?
-//   applications Application[]
-// }
+model Record {
-model Device {
-  id            Int          @default(autoincrement()) @id
-  Application   Application? @relation(fields: [applicationId], references: [id])
-  applicationId Int?
-  name          String
-  description   String?
-  records       Record[]
-}
+  id    Int    @default(autoincrement()) @id
+  value String // could also be a Float?
-model Record {
-
-  id         Int      @default(autoincrement()) @id
-  value      String
   recordedAt DateTime
   Device     Device?  @relation(fields: [deviceId], references: [id])
   deviceId   Int?
 }
```


